#===============================================================================
# 智能小车配置
#===============================================================================

# --- 1. 运行模式选择 (互斥：一次只能跑一个程序) ---
choice SMART_CAR_RUN_MODE
    prompt "Select Running Application"
    default SMART_CAR_RUN_ROBOT_DEMO
    help
        选择要编译和运行的主应用程序

    config SMART_CAR_RUN_ROBOT_DEMO
        bool "Robot Demo (Tracking & Obstacle Avoidance)"
        select SMART_CAR_DRIVER_L9110S
        select SMART_CAR_DRIVER_HCSR04
        select SMART_CAR_DRIVER_TCRT5000
        select SMART_CAR_DRIVER_SSD1306
        select SMART_CAR_DRIVER_WIFI
        select SMART_CAR_DRIVER_UART
        help
            主要集成应用

    config SMART_CAR_RUN_L9110S_TEST
        bool "Test: L9110S Motor"
        select SMART_CAR_DRIVER_L9110S

    config SMART_CAR_RUN_HCSR04_TEST
        bool "Test: HC-SR04 Ultrasonic"
        select SMART_CAR_DRIVER_HCSR04

    config SMART_CAR_RUN_TCRT5000_TEST
        bool "Test: TCRT5000 Line Sensor"
        select SMART_CAR_DRIVER_TCRT5000

    config SMART_CAR_RUN_SSD1306_TEST
        bool "Test: SSD1306 OLED"
        select SMART_CAR_DRIVER_SSD1306

    config SMART_CAR_RUN_WIFI_TEST
        bool "Test: WiFi Client"
        select SMART_CAR_DRIVER_WIFI

    config SMART_CAR_RUN_BT_SPP_TEST
        bool "Test: Bluetooth SPP"
        select SMART_CAR_DRIVER_BT_SPP

endchoice

# --- 2. 驱动开关定义 (被上面自动选中) ---
menu "Drivers Status"
    config SMART_CAR_DRIVER_L9110S
        bool "L9110S Driver"
    
    config SMART_CAR_DRIVER_HCSR04
        bool "HC-SR04 Driver"

    config SMART_CAR_DRIVER_TCRT5000
        bool "TCRT5000 Driver"

    config SMART_CAR_DRIVER_SSD1306
        bool "SSD1306 Driver"

    config SMART_CAR_DRIVER_WIFI
        bool "WiFi Driver"

    config SMART_CAR_DRIVER_BT_SPP
        bool "Bluetooth SPP Driver"

    config SMART_CAR_DRIVER_UART
        bool "UART Driver"
endmenu

# --- 3. WiFi模式选择 ---
choice SMART_CAR_WIFI_MODE
    prompt "WiFi Working Mode"
    default SMART_CAR_WIFI_MODE_AP
    depends on SMART_CAR_DRIVER_WIFI
    help
        选择WiFi工作模式

    config SMART_CAR_WIFI_MODE_STA
        bool "STA Mode (Connect to Router)"
        help
            STA模式：连接到指定的路由器
            SSID: BSHZ-2.4G
            Password: BS666888

    config SMART_CAR_WIFI_MODE_AP
        bool "AP Mode (Hotspot)"
        help
            AP模式：开发板作为热点
            SSID: WS63_Robot
            Password: 12345678
            IP: 192.168.43.1
endchoice

config SMART_CAR_WIFI_MODE
    int
    default 0 if SMART_CAR_WIFI_MODE_STA
    default 1 if SMART_CAR_WIFI_MODE_AP